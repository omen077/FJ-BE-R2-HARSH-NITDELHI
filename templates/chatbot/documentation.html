{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Expense Assistant Chatbot Documentation</h5>
            </div>
            <div class="card-body">
                <h2>How to Use the Expense Assistant</h2>
                <p>
                    The Expense Assistant is an AI-powered chatbot that uses Google's Gemini to help you manage your expenses through natural language. 
                    You can have a conversation with it to add, view, edit, and delete expenses without having to 
                    use the traditional forms.
                </p>

                {% if not GEMINI_ENABLED %}
                <div class="alert alert-warning mb-4" role="alert">
                    <h5><i class="fas fa-exclamation-triangle mr-2"></i> Gemini API Key Not Set</h5>
                    <p>The chatbot is currently running in fallback mode without AI capabilities. To enable the full Gemini-powered experience, set up the API key using the following command:</p>
                    <pre class="bg-light p-3"><code>python manage.py setup_gemini --key YOUR_API_KEY</code></pre>
                    <p>You can get a Gemini API key from <a href="https://ai.google.dev/" target="_blank">Google AI Studio</a>.</p>
                </div>
                {% endif %}

                <h3>Available Commands</h3>
                <p>With Gemini AI, you can interact naturally with the chatbot. Here are some example commands:</p>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Task</th>
                                <th>Example Commands</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Add an expense</td>
                                <td>
                                    <ul>
                                        <li>"Add an expense of $45 for dinner yesterday"</li>
                                        <li>"I spent $23.50 on groceries today"</li>
                                        <li>"Record a new expense: $15 for transportation"</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>View expenses</td>
                                <td>
                                    <ul>
                                        <li>"Show me my recent expenses"</li>
                                        <li>"What did I spend on groceries this month?"</li>
                                        <li>"Show expenses from last week"</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>Edit expenses</td>
                                <td>
                                    <ul>
                                        <li>"Change my last expense amount to $50"</li>
                                        <li>"Update expense #12 category to entertainment"</li>
                                        <li>"Edit the date of expense #5 to yesterday"</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>Delete expenses</td>
                                <td>
                                    <ul>
                                        <li>"Delete my last expense"</li>
                                        <li>"Remove expense #8"</li>
                                        <li>"Delete the $20 transportation expense"</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>Get statistics</td>
                                <td>
                                    <ul>
                                        <li>"Show me my spending summary"</li>
                                        <li>"What are my top spending categories this month?"</li>
                                        <li>"Give me statistics on my expenses"</li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Understanding Gemini-Powered Conversations</h3>
                <p>
                    With Gemini integration, the chatbot understands context and can handle complex conversations naturally.
                    You can ask follow-up questions, provide missing information, and have a more human-like interaction:
                </p>
                <div class="card bg-light mb-3">
                    <div class="card-body">
                        <p class="mb-2"><strong>You:</strong> "I spent money on groceries yesterday"</p>
                        <p class="mb-2"><strong>Bot:</strong> "How much did you spend on groceries?"</p>
                        <p class="mb-2"><strong>You:</strong> "$45.20"</p>
                        <p class="mb-2"><strong>Bot:</strong> "I've added your expense of $45.20 for groceries."</p>
                    </div>
                </div>

                <h3>How It Works</h3>
                <p>
                    The Expense Assistant uses Google's Gemini AI to:
                </p>
                <ol>
                    <li>Understand your natural language input</li>
                    <li>Extract relevant information (amounts, dates, categories, etc.)</li>
                    <li>Determine your intent (add, view, edit, delete)</li>
                    <li>Call the appropriate API functions to manage your expenses</li>
                    <li>Generate natural language responses</li>
                </ol>
                <p>
                    This means you can interact with the system in a conversational way rather than having to remember specific commands or navigate multiple forms.
                </p>

                <h3>Troubleshooting</h3>
                <div class="accordion" id="troubleshootingAccordion">
                    <div class="card">
                        <div class="card-header" id="headingOne">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne">
                                    The chatbot isn't working or shows a warning message
                                </button>
                            </h2>
                        </div>
                        <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#troubleshootingAccordion">
                            <div class="card-body">
                                If you see a warning about the Gemini API key not being set, you need to:
                                <ol>
                                    <li>Get a Gemini API key from <a href="https://ai.google.dev/" target="_blank">Google AI Studio</a></li>
                                    <li>Run the setup command: <code>python manage.py setup_gemini --key YOUR_API_KEY</code></li>
                                    <li>Restart the Django server</li>
                                </ol>
                                This will enable the full AI-powered experience.
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingTwo">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseTwo">
                                    The chatbot misunderstands my request
                                </button>
                            </h2>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#troubleshootingAccordion">
                            <div class="card-body">
                                While Gemini is powerful, it might sometimes misunderstand your request. If this happens:
                                <ul>
                                    <li>Try to be more specific with your request</li>
                                    <li>Explicitly mention key information like amounts, dates, and categories</li>
                                    <li>Use clear action words like "add," "view," "edit," or "delete"</li>
                                </ul>
                                You can always correct misunderstandings by responding with more information.
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingThree">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseThree">
                                    The chatbot is responding slowly
                                </button>
                            </h2>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#troubleshootingAccordion">
                            <div class="card-body">
                                Response times can vary based on several factors:
                                <ul>
                                    <li>Network connectivity and latency</li>
                                    <li>Current load on the Gemini API</li>
                                    <li>Complexity of your query</li>
                                </ul>
                                If responses are consistently slow, try using simpler requests or check your internet connection.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %} 